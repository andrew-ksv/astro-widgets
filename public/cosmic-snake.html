<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸCosmic Snake</title>
    <link rel="stylesheet" href="/css/snake.css">
    <link rel="icon" href="/images/favicon.png" type="image/x-icon">
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
      </script>
      <script defer src="/_vercel/insights/script.js"></script>
      <meta name="google-adsense-account" content="ca-pub-3594842010285973">
</head>
<body>
<div class="container">
    <div class="legend-card">
        <p class="board-heading">Snake Game Legend</p>
        <p><span>ğŸ‰</span> Food: +10 score</p>
        <p><span>â­</span> Star: +100 score</p>
        <p><span>ğŸ•³ï¸</span> Black Hole: -50 score</p>
    </div>

    <div class="main-game">
        <p class="heading">Cosmic Snake video game</p>
        <p class="hint">Control using the keyboard or on-screen buttons</p>
       
        <div id="score">Score: 0</div>
        <div id="timer">Time: 00:00</div>
        <div id="game"></div>

        <div class="controls">
            <a href="index.html"><button class="button">ğŸ Main</button></a>
            <button class="button" id="left">â¬…ï¸</button>
            <div>
                <button class="button" id="up">â¬†ï¸</button>
                <button class="button" id="down">â¬‡ï¸</button>
            </div>
            <button class="button" id="right">â¡ï¸</button>
            <button class="button" id="restart">ğŸ”„Restart</button>
        </div>
    </div>

    <div class="leaderboard-wrap">
    <p class="board-heading">leaderboard</p>
    <div id="leaderboard">
        
    </div>
    </div>

    <script> 
    async function fetchLeaderboard() { const response = await fetch('/api/leaderboard'); 
    const leaders = await response.json(); 
    const leaderboard = document.getElementById('leaderboard'); 
    leaderboard.innerHTML = ''; 
     leaders.forEach((leader, index) => 
     { const div = document.createElement('div'); 
     div.innerText = `${index + 1}. ${leader.nickname} - ${leader.score} (${leader.play_time})`;
      leaderboard.appendChild(div); }); } 
      fetchLeaderboard(); 
      </script>


    <div class="ad">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3594842010285973"
        crossorigin="anonymous"></script>
   <!-- snake page -->
   <ins class="adsbygoogle"
        style="display:inline-block;width:150px;height:450px"
        data-ad-client="ca-pub-3594842010285973"
        data-ad-slot="2015873995"></ins>
   <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
   </script>
    </div>

</div>
<!-- Ğ²Ğ²ĞµĞ´ĞµĞ½Ğ½Ñ Ğ½Ñ–ĞºĞ½ĞµĞ¹Ğ¼Ğ° -->
<div id="nickname-modal" style="display: none;">
    <div class="modal-content">
        <p>Enter your nickname:</p>
        <input type="text" id="nickname" placeholder="Your nickname">
        <button id="submit-nickname">OK</button>
        <button id="cancel-nickname">Cancel</button>
    </div>
</div>

<script>
    document.getElementById('submit-nickname').addEventListener('click', async () => {
        const nickname = document.getElementById('nickname').value;
        const score = document.getElementById('score').innerText.replace('Score: ', ''); // Ğ¾Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ğ½Ğ½Ñ Ğ¾Ñ‡Ğ¾Ğº
        const play_time = document.getElementById('timer').innerText.replace('Time: ', ''); // Ğ¾Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ğ½Ğ½Ñ Ñ‡Ğ°ÑÑƒ

        const response = await fetch('/api/submit-score', {
            method: 'POST',
            body: new URLSearchParams({
                nickname,
                score,
                play_time
            })
        });

        if (response.ok) {
            // ĞĞ±Ñ€Ğ¾Ğ±ĞºĞ° ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑÑƒ
            alert('Score submitted successfully!');
        } else {
            // ĞĞ±Ñ€Ğ¾Ğ±ĞºĞ° Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸
            alert('Error submitting score.');
        }
        // ĞŸÑ€Ğ¸Ñ…Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ¼Ğ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğµ Ğ²Ñ–ĞºĞ½Ğ¾ Ğ¿Ñ–ÑĞ»Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑƒ
        document.getElementById('nickname-modal').style.display = 'none';
    });
    document.getElementById('cancel-nickname').addEventListener('click', () => {
        document.getElementById('nickname-modal').style.display = 'none';
    });
</script>


<script src="/js/snake.js"></script>
</body>
</html>